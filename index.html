<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L√¨ X√¨ 2026 - Ng≈© H√†nh May M·∫Øn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Montserrat', sans-serif; background: #0f172a; color: white; overflow-x: hidden; }
        
        /* Hi·ªáu ·ª©ng m√¢y ch√¨m */
        .bg-pattern {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('https://www.transparenttextures.com/patterns/oriental-tiles.png');
            opacity: 0.1; pointer-events: none; z-index: 0;
        }

        .swiper { width: 100%; padding-top: 40px; padding-bottom: 60px; }
        
        .swiper-slide {
            width: 260px; height: 380px; border-radius: 24px;
            display: flex; flex-direction: column; align-items: center; justify-content: space-between;
            padding: 30px 20px; position: relative; transition: 0.5s;
            border: 1px solid rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
        }

        /* ƒê·ªãnh nghƒ©a m√†u s·∫Øc Ng≈© H√†nh Cao C·∫•p */
        .kim { background: linear-gradient(145deg, #fef3c7, #fbbf24); color: #78350f; box-shadow: 0 10px 30px -5px rgba(251, 191, 36, 0.4); }
        .moc { background: linear-gradient(145deg, #dcfce7, #22c55e); color: #064e3b; box-shadow: 0 10px 30px -5px rgba(34, 197, 94, 0.4); }
        .thuy { background: linear-gradient(145deg, #e0f2fe, #3b82f6); color: #1e3a8a; box-shadow: 0 10px 30px -5px rgba(59, 130, 246, 0.4); }
        .hoa { background: linear-gradient(145deg, #fee2e2, #ef4444); color: #7f1d1d; box-shadow: 0 10px 30px -5px rgba(239, 68, 68, 0.4); }
        .tho { background: linear-gradient(145deg, #f5f5f4, #78716c); color: #292524; box-shadow: 0 10px 30px -5px rgba(120, 113, 108, 0.4); }

        .btn-open {
            background: rgba(255, 255, 255, 0.9);
            padding: 12px 30px; border-radius: 99px; font-weight: 900;
            transform: translateY(10px); opacity: 0; transition: 0.4s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .swiper-slide-active .btn-open { transform: translateY(0); opacity: 1; }

        .history-item { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); }
    </style>
</head>
<body>
    <div class="bg-pattern"></div>

    <div id="setup-screen" class="relative z-10 max-w-md mx-auto p-6 min-h-screen flex flex-col justify-center">
        <div class="text-center mb-8">
            <h2 class="text-3xl font-black text-yellow-500 uppercase tracking-tighter">C√ÄI ƒê·∫∂T L√å X√å 2026</h2>
            <p class="text-slate-400 text-sm">Nh·∫≠p s·ªë l∆∞·ª£ng bao cho t·ª´ng m·ªánh gi√°</p>
        </div>
        
        <div id="denom-inputs" class="space-y-3 mb-6"></div>
        
        <div class="bg-slate-800/50 backdrop-blur p-5 rounded-3xl border border-slate-700">
            <div class="flex justify-between items-center mb-2">
                <span class="text-slate-400">T·ªïng ng√¢n s√°ch:</span>
                <span id="total-money" class="text-xl font-black text-yellow-500">0ƒë</span>
            </div>
            <div class="text-xs text-slate-500 flex justify-between uppercase font-bold tracking-widest">
                <span>S·ªë l∆∞·ª£ng bao:</span>
                <span id="total-count">0 bao</span>
            </div>
        </div>

        <button onclick="startGame()" class="w-full mt-8 bg-gradient-to-r from-red-600 to-orange-600 text-white py-5 rounded-3xl font-black text-lg shadow-2xl shadow-red-900/40 hover:scale-[1.02] active:scale-95 transition-all uppercase">
            B·∫ÆT ƒê·∫¶U NI√äM PHONG
        </button>
    </div>

    <div id="play-screen" class="hidden relative z-10 min-h-screen flex flex-col items-center justify-between py-10 px-4">
        <div class="text-center">
            <h1 class="text-4xl font-black italic tracking-tighter text-transparent bg-clip-text bg-gradient-to-b from-yellow-200 to-yellow-600 mb-1">L√å X√å 2026</h1>
            <div id="rem-packets" class="bg-white/10 px-4 py-1 rounded-full text-[10px] uppercase font-bold tracking-widest inline-block text-yellow-500 border border-yellow-500/20">C√≤n l·∫°i: 0 bao</div>
        </div>

        <div class="swiper mySwiper">
            <div class="swiper-wrapper">
                <div class="swiper-slide kim"><div><p class="text-[10px] uppercase tracking-[0.3em] font-bold opacity-60">Ng≈© H√†nh</p><p class="text-2xl font-black mt-1">KIM</p></div><div class="text-6xl">üíé</div><button onclick="openModal()" class="btn-open">M·ªû L·ªòC</button></div>
                <div class="swiper-slide moc"><div><p class="text-[10px] uppercase tracking-[0.3em] font-bold opacity-60">Ng≈© H√†nh</p><p class="text-2xl font-black mt-1">M·ªòC</p></div><div class="text-6xl">üåø</div><button onclick="openModal()" class="btn-open">M·ªû L·ªòC</button></div>
                <div class="swiper-slide thuy"><div><p class="text-[10px] uppercase tracking-[0.3em] font-bold opacity-60">Ng≈© H√†nh</p><p class="text-2xl font-black mt-1">TH·ª¶Y</p></div><div class="text-6xl">üíß</div><button onclick="openModal()" class="btn-open">M·ªû L·ªòC</button></div>
                <div class="swiper-slide hoa"><div><p class="text-[10px] uppercase tracking-[0.3em] font-bold opacity-60">Ng≈© H√†nh</p><p class="text-2xl font-black mt-1">H·ªéA</p></div><div class="text-6xl">üî•</div><button onclick="openModal()" class="btn-open">M·ªû L·ªòC</button></div>
                <div class="swiper-slide tho"><div><p class="text-[10px] uppercase tracking-[0.3em] font-bold opacity-60">Ng≈© H√†nh</p><p class="text-2xl font-black mt-1">TH·ªî</p></div><div class="text-6xl">‚õ∞Ô∏è</div><button onclick="openModal()" class="btn-open">M·ªû L·ªòC</button></div>
            </div>
        </div>

        <div class="w-full max-w-sm px-4">
            <h3 class="text-[10px] font-black text-slate-500 uppercase mb-4 tracking-[0.2em] text-center italic">Danh s√°ch nh·∫≠n l·ªôc</h3>
            <div id="history-list" class="space-y-2 max-h-48 overflow-y-auto pr-2"></div>
            <button onclick="resetGame()" class="w-full mt-6 text-[10px] text-slate-600 uppercase font-bold hover:text-red-500 transition-colors">Thi·∫øt l·∫≠p l·∫°i t·ª´ ƒë·∫ßu</button>
        </div>
    </div>

    <div id="name-modal" class="hidden fixed inset-0 bg-slate-950/90 flex items-center justify-center p-6 z-50 backdrop-blur-xl">
        <div class="w-full max-w-xs text-center">
            <div class="w-20 h-20 bg-yellow-500 rounded-full flex items-center justify-center mx-auto mb-6 shadow-2xl shadow-yellow-500/20 text-3xl">üßß</div>
            <h3 class="text-2xl font-black text-white mb-2">DANH T√çNH</h3>
            <p class="text-slate-400 text-sm mb-6 italic">Ghi danh ƒë·ªÉ nh·∫≠n l·ªôc ƒë·∫ßu xu√¢n</p>
            <input type="text" id="user-name" placeholder="Nh·∫≠p t√™n..." class="w-full bg-slate-800 text-white border-2 border-slate-700 p-4 rounded-2xl mb-4 text-center focus:border-yellow-500 outline-none font-bold text-lg transition-all">
            <button onclick="confirmPick()" class="w-full bg-yellow-500 text-slate-900 py-4 rounded-2xl font-black text-lg shadow-xl hover:bg-yellow-400 transition-all uppercase tracking-tighter">X√ÅC NH·∫¨N M·ªû</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        const DENOMS = [500000, 200000, 100000, 50000, 20000, 10000];
        let state = JSON.parse(localStorage.getItem('lixi_2026_final')) || null;

        const inputContainer = document.getElementById('denom-inputs');
        DENOMS.forEach(d => {
            const div = document.createElement('div');
            div.className = "flex items-center justify-between p-4 bg-slate-800/40 border border-slate-700 rounded-2xl";
            div.innerHTML = `<span class="font-bold text-slate-300 text-sm">${d.toLocaleString()}ƒë</span> 
            <div class="flex items-center gap-2"><input type="number" data-val="${d}" value="0" oninput="calc()" class="denom-input w-16 bg-transparent text-right font-black text-yellow-500 outline-none text-lg"> <span class="text-slate-600 text-[10px] uppercase font-bold">Bao</span></div>`;
            inputContainer.appendChild(div);
        });

        function calc() {
            let money = 0, count = 0;
            document.querySelectorAll('.denom-input').forEach(i => {
                const c = parseInt(i.value) || 0;
                money += c * parseInt(i.dataset.val);
                count += c;
            });
            document.getElementById('total-money').innerText = money.toLocaleString() + 'ƒë';
            document.getElementById('total-count').innerText = count + ' bao';
        }

        function startGame() {
            let pool = [];
            document.querySelectorAll('.denom-input').forEach(i => {
                const c = parseInt(i.value) || 0;
                for(let j=0; j<c; j++) pool.push(parseInt(i.dataset.val));
            });
            if(pool.length === 0) return alert("Nh·∫≠p √≠t nh·∫•t 1 bao!");
            pool.sort(() => Math.random() - 0.5);
            state = { pool, history: [] };
            save();
        }

        function save() {
            localStorage.setItem('lixi_2026_final', JSON.stringify(state));
            render();
        }

        function render() {
            if(!state) return;
            document.getElementById('setup-screen').classList.add('hidden');
            document.getElementById('play-screen').classList.remove('hidden');
            document.getElementById('rem-packets').innerText = `C√≤n l·∫°i: ${state.pool.length} bao`;

            document.getElementById('history-list').innerHTML = state.history.slice().reverse().map(h => `
                <div class="history-item flex justify-between p-3 rounded-xl text-xs mb-2 animate-fadeIn">
                    <span class="font-bold text-slate-300">${h.name}</span>
                    <span class="font-black text-yellow-500">+${h.v.toLocaleString()}ƒë</span>
                </div>
            `).join('');
        }

        const swiper = new Swiper(".mySwiper", {
            effect: "coverflow",
            grabCursor: true,
            centeredSlides: true,
            slidesPerView: "auto",
            coverflowEffect: { rotate: 20, stretch: 0, depth: 150, modifier: 1, slideShadows: false },
        });

        function openModal() {
            if(state.pool.length === 0) return alert("H·∫øt l√¨ x√¨ r·ªìi!");
            document.getElementById('name-modal').classList.remove('hidden');
        }

        function confirmPick() {
            const name = document.getElementById('user-name').value.trim();
            if(!name) return alert("Vui l√≤ng nh·∫≠p t√™n!");
            const value = state.pool.pop();
            state.history.push({ name, v: value });
            confetti({ particleCount: 150, spread: 80, origin: { y: 0.6 }, colors: ['#fbbf24', '#ef4444', '#ffffff'] });
            alert(`üßß Ch√∫c m·ª´ng ${name} nh·∫≠n ƒë∆∞·ª£c ${value.toLocaleString()}ƒë!`);
            document.getElementById('name-modal').classList.add('hidden');
            document.getElementById('user-name').value = '';
            save();
        }

        function resetGame() {
            if(confirm("T·∫øt n√†y ch·ªâ ch∆°i m·ªôt l·∫ßn, b·∫°n c√≥ ch·∫Øc mu·ªën reset to√†n b·ªô?")) {
                localStorage.removeItem('lixi_2026_final');
                location.reload();
            }
        }
        if(state) render();
    </script>
</body>
</html>
